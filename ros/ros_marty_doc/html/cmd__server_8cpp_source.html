<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>ros_marty: cmd_server.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_51d6616cce93a5023f92fa2f16639b7c.html">ros_marty</a></li><li class="navelem"><a class="el" href="dir_47c2952e4473bffb0fea7e90ba27b3b0.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">cmd_server.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="cmd__server_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cmd__server_8hpp.html">ros_marty/cmd_server.hpp</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceTrajectory.html">Trajectory</a>;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="classCmdServer.html#a8584c0e24e48a82764ec741019903057">   16</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a8584c0e24e48a82764ec741019903057">CmdServer::robotReady</a>() {</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  <span class="keywordflow">if</span> (ready_move_) {</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    robot_-&gt;enableRobot();</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    robot_-&gt;readySound();</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="keywordtype">int</span> arm_pos = 20;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keywordtype">int</span> lean_pos = 30;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    this-&gt;lean(<a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>, lean_pos, 500);</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    this-&gt;lean(<a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>, lean_pos, 1000);</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    this-&gt;arms(0, 0);</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    this-&gt;standStraight(500);</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(<a class="code" href="cmd__server_8hpp.html#aa71ae51141fa8e98fffd2cc28cc01de5">stop_wait</a>);</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    this-&gt;arms(arm_pos, arm_pos);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    robot_-&gt;setServo(<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c">EYES</a>, <a class="code" href="definitions_8hpp.html#af3a3ef46c4fb0f15114f3b98b327afb6">EYES_NORMAL</a>);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(<a class="code" href="cmd__server_8hpp.html#aa71ae51141fa8e98fffd2cc28cc01de5">stop_wait</a> * 2);</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    this-&gt;arms(0, 0);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordtype">float</span> batt = robot_-&gt;getBattery();</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    robot_-&gt;setServo(<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c">EYES</a>, <a class="code" href="definitions_8hpp.html#a20d0eda6d6bec8f6896262f08f8d734c">EYES_WIDE</a> * (1.0 - batt));</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(<a class="code" href="cmd__server_8hpp.html#aa71ae51141fa8e98fffd2cc28cc01de5">stop_wait</a>);</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    robot_-&gt;stopRobot();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  }</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classCmdServer.html#a4af24896fe3783fcd87d0d6eb5c59108">   48</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a4af24896fe3783fcd87d0d6eb5c59108">CmdServer::runCommand</a>(vector&lt;int&gt; <a class="code" href="namespaceserial__read.html#a1b3233bdb91ba2e59025a5300099421a">data</a>) {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  busy_ = <span class="keyword">true</span>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordtype">int</span> l = data.size();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">switch</span> (data[0]) {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a264bfc86816c6820737f110de3a825d6">CMD_HELLO</a>: hello(); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430afcc25eefc3aff15e600009c99b86edf2">CMD_MOVEJOINT</a>:</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (l == 4) {moveJoint(data[1], data[2], data[3]);}</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span> (l == 5) {moveJoint(data[1], data[2], data[3], data[4]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a9728cf856915274c74e7e19f234dfdd2">CMD_LEAN</a>:</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (l == 2) {lean(data[1]);} <span class="keywordflow">if</span> (l == 3) {lean(data[1], data[2]);}</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> (l == 4) {lean(data[1], data[2], data[3]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430af52f5636bdd52b5e2d392539bf1729f0">CMD_WALK</a>:</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (l == 2) {walk(data[1]);} <span class="keywordflow">if</span> (l == 3) {walk(data[1], data[2]);}</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span> (l == 4) {walk(data[1], data[2], data[3]);}</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span> (l == 5) {walk(data[1], data[2], data[3], data[4]);}</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (l == 6) {walk(data[1], data[2], data[3], data[4], data[5]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430aaeb85c9f900a5e9ed191734a810a0084">CMD_KICK</a>:</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (l == 2) {kick(data[1]);} <span class="keywordflow">if</span> (l == 3) {kick(data[1], data[2]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a7aea1697d03ef1e6ff1bba5e34f42e15">CMD_EYES</a>:</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (l == 1) {eyes();} <span class="keywordflow">if</span> (l == 2) {eyes(data[1]);}</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">if</span> (l == 3) {eyes(data[1], data[2]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a901c26d5f141b4ae538e251e73c42cd8">CMD_CELEBRATE</a>:</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (l == 2) {celebrate(data[1]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430af4f1445f1abfe4c16c922a3b4d2c8c47">CMD_LIFTLEG</a>:</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> (l == 2) {liftLeg(data[1]);} <span class="keywordflow">if</span> (l == 3) {liftLeg(data[1], data[2]);}</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">if</span> (l == 4) {liftLeg(data[1], data[2], data[3]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a9a7187f6ef5a5dfe9149619bffdacd4a">CMD_LOWERLEG</a>:</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> (l == 2) {lowerLeg(data[1]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a9657004f93152e2f6234ddd23e99962c">CMD_DANCE</a>:</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    dance(data[1]); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430af57f1734be597111ddbe5ac6ca44e90c">CMD_ROLLERSKATE</a>: <a class="code" href="namespaceTrajectory.html#a12efeffaf3dde25faeeb92600cca9f59">rollerSkate</a>(robot_); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a22f05414bba2eb7e98db17045c41f975">CMD_ARMS</a>:</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (l == 2) {arms(data[1]);} <span class="keywordflow">if</span> (l == 3) {arms(data[1], data[2]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430af5e1fd68b47167cc9651c686e1bfbb14">CMD_DEMO</a>: demo(); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a45c21ca83f2e20fbfd255d9c23552b48">CMD_GET</a>: <span class="keywordflow">if</span> (l == 3) {getData(data[1], data[2]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a006e24f39842404105e8521db322f879">CMD_SIDESTEP</a>:</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> (l == 2) {sideStep(data[1]);} <span class="keywordflow">if</span> (l == 3) {sideStep(data[1], data[2]);}</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> (l == 4) {sideStep(data[1], data[2], data[3]);}</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (l == 5) {sideStep(data[1], data[2], data[3], data[4]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a0e997cfa95d4e5ca6c670d9290848770">CMD_STRAIGHT</a>:</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (l == 1) {standStraight();} <span class="keywordflow">if</span> (l == 2) {standStraight(data[1]);} <span class="keywordflow">break</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430ac707e16d43a0995c8712f0b68e19e8ce">CMD_SOUND</a>:</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    playSounds(data); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a1e0ceff2d6f13742786f42dac58149bc">CMD_STOP</a>: stopRobot(); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    ROS_ERROR_STREAM(<span class="stringliteral">&quot;CmdServer did not recognise command &quot;</span> &lt;&lt; data[0]); <span class="keywordflow">break</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  busy_ = <span class="keyword">false</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classCmdServer.html#a43e0afa3503d74be0f2ed15f9bff8a77">   98</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a43e0afa3503d74be0f2ed15f9bff8a77">CmdServer::runSockCommand</a>(vector&lt;int8_t&gt; <a class="code" href="namespaceserial__read.html#a1b3233bdb91ba2e59025a5300099421a">data</a>) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span> ((data.size() % 4) != 0) {ROS_ERROR(<span class="stringliteral">&quot;Data Package wrong size!&quot;</span>);} <span class="keywordflow">else</span> {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    vector&lt;int&gt; cmd_data;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (data.size() / 4); ++i) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="comment">// ROS_INFO_STREAM(&quot;Data &quot; &lt;&lt; i &lt;&lt; &quot;: &quot; &lt;&lt; (int)data[i]);</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      cmd_data.push_back(0);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      memcpy(&amp;cmd_data[i], &amp;data[(i * 4)], 4);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="comment">// ROS_INFO_STREAM(&quot;NewData &quot; &lt;&lt; cmd_data[i]);</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// if (busy_) {ROS_INFO(&quot;BUSY!&quot;);} else {ROS_INFO(&quot;NOT BUSY!&quot;);}</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (!busy_) { runCommand(cmd_data); }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">else</span> { cmd_queue_.push_back(cmd_data); }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classCmdServer.html#a0a711b068efc5ed27ec4cc040bf9a523">  113</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a0a711b068efc5ed27ec4cc040bf9a523">CmdServer::hello</a>() {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tInterp;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// Return body to center</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  tInterp = <a class="code" href="namespaceTrajectory.html#a107677a3c2be922f577491da3ddd6951">genReturnToZero</a>(robot_, 1.5);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// Move eyes</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(<a class="code" href="cmd__server_8hpp.html#aa71ae51141fa8e98fffd2cc28cc01de5">stop_wait</a>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  robot_-&gt;setServo(<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c">EYES</a>, <a class="code" href="definitions_8hpp.html#a20d0eda6d6bec8f6896262f08f8d734c">EYES_WIDE</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(<a class="code" href="cmd__server_8hpp.html#aa71ae51141fa8e98fffd2cc28cc01de5">stop_wait</a> * 3);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  robot_-&gt;setServo(<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c">EYES</a>, <a class="code" href="definitions_8hpp.html#af3a3ef46c4fb0f15114f3b98b327afb6">EYES_NORMAL</a>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(<a class="code" href="cmd__server_8hpp.html#aa71ae51141fa8e98fffd2cc28cc01de5">stop_wait</a>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classCmdServer.html#a2d5d0712985b65d78cc20aebba84e0b3">  126</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a2d5d0712985b65d78cc20aebba84e0b3">CmdServer::walk</a>(<span class="keywordtype">int</span> num_steps, <span class="keywordtype">int</span> turn, <span class="keywordtype">int</span> move_time, <span class="keywordtype">int</span> step_length,</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                     <span class="keywordtype">int</span> side) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tInterp;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordtype">float</span> step_time = ((float) move_time) / 1000; <span class="comment">// Float in seconds</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">bool</span> leftFoot = <span class="keyword">false</span>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) { leftFoot = <span class="keyword">true</span>; }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) { leftFoot = <span class="keyword">false</span>; } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// Step with left foot if LHip is ahead</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d">RHIP</a>] &lt; robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781acba4bbf9fa32f57381b07b97d65b75fc">LHIP</a>]) { leftFoot = <span class="keyword">true</span>; }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Invert if walking backwards</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (step_length &lt; 0) { leftFoot = !leftFoot; }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">if</span> ((turn_spot_) &amp;&amp; ((abs(turn) &gt; 0) &amp;&amp; (step_length == 0)))</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  { leftFoot = !leftFoot; turn_spot_ = <span class="keyword">false</span>; }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((abs(turn) &gt; 0) &amp;&amp; (step_length == 0)) { turn_spot_ = <span class="keyword">true</span>; }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">else</span> { turn_spot_ = <span class="keyword">false</span>; }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">// Start walking!</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> step_num = 0; step_num &lt; num_steps; step_num++) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (leftFoot) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      tInterp = <a class="code" href="namespaceTrajectory.html#a2af9d0deb83d514dd3c2d607723aa061">genStepLeft</a>(robot_, step_length, turn, step_time);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      tInterp = <a class="code" href="namespaceTrajectory.html#a804d3ff8ef7f61f33b86065f9100a04d">genStepRight</a>(robot_, step_length, turn, step_time);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    leftFoot = !leftFoot;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="classCmdServer.html#ab33ed8c07ffc129fbce8539920e7e1be">  154</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#ab33ed8c07ffc129fbce8539920e7e1be">CmdServer::kick</a>(<span class="keywordtype">int</span> side, <span class="keywordtype">int</span> move_time) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tInterp;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordtype">float</span> kicktime = ((float)move_time) / 1000;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// robot_-&gt;loadKeyframes(&quot;kick_left&quot;, move_time);</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    tInterp = <a class="code" href="namespaceTrajectory.html#a26f3cf7c809da1f0ab4d5bdcc48c0b53">genKickLeft</a>(robot_, kicktime);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// robot_-&gt;loadKeyframes(&quot;kick_right&quot;, move_time);</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    tInterp = <a class="code" href="namespaceTrajectory.html#a422c80a0d4397fa7ec4d9289073a908f">genKickRight</a>(robot_, kicktime);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classCmdServer.html#a65bee1493bcc4c8eab09286bc0518f26">  167</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a65bee1493bcc4c8eab09286bc0518f26">CmdServer::eyes</a>(<span class="keywordtype">int</span> amount, <span class="keywordtype">int</span> amount2) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  robot_-&gt;setServo(<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c">EYES</a>, amount);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classCmdServer.html#a6d451ea1dfec2c3282d5070df20b766e">  171</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a6d451ea1dfec2c3282d5070df20b766e">CmdServer::getData</a>(<span class="keywordtype">int</span> sensor, <span class="keywordtype">int</span> <span class="keywordtype">id</span>) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  resp_request_ = <span class="keyword">true</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">if</span> (sensor == <a class="code" href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056eaccfbe6ea481f72c83a5e43626cfa6163">GET_GPIO</a>) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">id</span> &gt;= 8) || (<span class="keywordtype">id</span> &lt; 0)) {resp_request_ = <span class="keyword">false</span>;}</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">else</span> { val_request_ = gpio_data_.gpio[id]; }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sensor == <a class="code" href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056ea1ce16a47fac91dad0eafbfd8810a2751">GET_ACCEL</a>) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="cmd__server_8hpp.html#ae3996976d8ffb3e58d88f58227473f8ea4ebc2421ebfbea2e5368ed1a27fbc0c1">AXES_X</a>) { val_request_ = accel_data_.x;}</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="cmd__server_8hpp.html#ae3996976d8ffb3e58d88f58227473f8eac63f6f4dc47fea2818aa918cb9cd1221">AXES_Y</a>) { val_request_ = accel_data_.y;}</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="cmd__server_8hpp.html#ae3996976d8ffb3e58d88f58227473f8eaf5f04d45b5f8b0deedcd661717ee8a81">AXES_Z</a>) { val_request_ = accel_data_.z;}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">else</span> {resp_request_ = <span class="keyword">false</span>;}</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sensor == <a class="code" href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056eadfe82e03b6ed8daf918149d250e1c2e2">GET_BATT</a>) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    val_request_ = batt_data_.data;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sensor == <a class="code" href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056ea2d36f7902fbea303a85f6710ea654baa">GET_CURR</a>) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">id</span> &gt;= 8) || (<span class="keywordtype">id</span> &lt; 0)) {resp_request_ = <span class="keyword">false</span>;}</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">else</span> { val_request_ = curr_data_.current[id]; }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sensor == <a class="code" href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056ea7da4cf12063f7070d5dbc792dd196aaf">GET_BALL</a>) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="cmd__server_8hpp.html#ae3996976d8ffb3e58d88f58227473f8ea4ebc2421ebfbea2e5368ed1a27fbc0c1">AXES_X</a>) { val_request_ = ball_pos_.x;}</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="cmd__server_8hpp.html#ae3996976d8ffb3e58d88f58227473f8eac63f6f4dc47fea2818aa918cb9cd1221">AXES_Y</a>) { val_request_ = ball_pos_.y;}</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    resp_request_ = <span class="keyword">false</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classCmdServer.html#add29fa62713239f562f01900b166d5b3">  194</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#add29fa62713239f562f01900b166d5b3">CmdServer::moveJoint</a>(<span class="keywordtype">int</span> side, <span class="keywordtype">int</span> joint, <span class="keywordtype">int</span> amount, <span class="keywordtype">int</span> move_time) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tSetpoints, tInterp;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  deque&lt;float&gt; tline(robot_-&gt;jangles_); tline.push_front(0);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// Generate a trajectory to move the joint</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// first line is the robot&#39;s present position</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  tSetpoints.clear(); tSetpoints.push_back(tline);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> (joint == <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab3c37ee369fed324a8f308cc669fcfe8">J_HIP</a>) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781acba4bbf9fa32f57381b07b97d65b75fc">LHIP</a>] = (float)amount;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d">RHIP</a>] = (float)amount;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joint == <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ad689a8d4c58d5198cdf29bd1966deb4e">J_TWIST</a>) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa2541846b559e05eb47db9bcff331799">LTWIST</a>] = (float)amount;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a7be1c3ac848204cfea8eed224719c087">RTWIST</a>] = (float)amount;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joint == <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab9e0f44c16490f36ac1e4e253b069b12">J_KNEE</a>) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>] = (float)amount;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>] = (float)amount;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joint == <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5a6e510256800dc3a70b66811ae4521d8f">J_LEG</a>) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781acba4bbf9fa32f57381b07b97d65b75fc">LHIP</a>] = (float)amount;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d">RHIP</a>] = (float)amount;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joint == <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab7371c4178bbec38f3171849f02e4ef1">J_ARM</a>) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781afbe7b4a6d6c1b2c80f16e769ab19d044">LARM</a>] = (float)amount;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781ace998dff000f371281e7f8fcfec8ee0c">RARM</a>] = (float)amount;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (joint == <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5a7db6059125d5810c8dd0cfa27480ce2d">J_EYES</a>) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c">EYES</a>] = (float)amount;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  tline[0] = ((float)move_time) / 1000; tSetpoints.push_back(tline);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="namespaceTrajectory.html#a5eb9f58cd19e3f1eba441f85cd7fb109">interpTrajectory</a>(tSetpoints, tInterp, interp_dt_);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classCmdServer.html#aef68e045dd515d5f722e341b900eb329">  238</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#aef68e045dd515d5f722e341b900eb329">CmdServer::lean</a>(<span class="keywordtype">int</span> dir, <span class="keywordtype">int</span> amount, <span class="keywordtype">int</span> move_time) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tSetpoints, tInterp; deque&lt;float&gt; tline(robot_-&gt;jangles_);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  tline.push_front(0); tSetpoints.push_back(tline);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordtype">float</span> lean_time = ((float)move_time) / 1000;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">if</span> (dir == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {<a class="code" href="namespaceTrajectory.html#a28416064f29d5a0f12e5d5a2921f1e5f">setPointsLeanLeft</a>(tSetpoints, amount, lean_time);}</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">if</span> (dir == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) {<a class="code" href="namespaceTrajectory.html#a01e442ba6c4ce0800d92173656c3f3e3">setPointsLeanRight</a>(tSetpoints, amount, lean_time);}</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (dir == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa16c4e3cc46413792ed5f7620112c7ca2">CMD_FORW</a>) {<a class="code" href="namespaceTrajectory.html#a33e8fcc35148a551044c95bd9719385b">setPointsLeanForward</a>(tSetpoints, amount, lean_time);}</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">if</span> (dir == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9a658d9d56ad4ea529b0278a089606be">CMD_BACK</a>) {<a class="code" href="namespaceTrajectory.html#a25387b64a1d9106bf336b7b1d9c748f6">setPointsLeanBackward</a>(tSetpoints, amount, lean_time);}</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="namespaceTrajectory.html#a5eb9f58cd19e3f1eba441f85cd7fb109">interpTrajectory</a>(tSetpoints, tInterp, interp_dt_);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="classCmdServer.html#aa625b40a8118dad2f1866dccce0cc1ed">  250</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#aa625b40a8118dad2f1866dccce0cc1ed">CmdServer::celebrate</a>(<span class="keywordtype">int</span> move_time) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tInterp;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  tInterp = <a class="code" href="namespaceTrajectory.html#a24c4d5807270e72661f7f98d7f81198a">genCelebration</a>(robot_, ((<span class="keywordtype">float</span>)move_time) / 1000);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  robot_-&gt;celebSound(1.6);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// Generate a trajectory to move the knee</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">// First line is the robot&#39;s present position</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">// tline should already have one line,</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">// with 0.0 timecode and robot&#39;s present angles</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classCmdServer.html#a1338a738bf970f9e69159bb7e542411b">  261</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a1338a738bf970f9e69159bb7e542411b">CmdServer::liftLeg</a>(<span class="keywordtype">int</span> leg, <span class="keywordtype">int</span> amount, <span class="keywordtype">int</span> move_time) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tSetpoints, tInterp; deque&lt;float&gt; tline(robot_-&gt;jangles_);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  tline.push_front(0); tSetpoints.clear(); tSetpoints.push_back(tline);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">if</span> (leg == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>] = tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>] + (float)amount;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (leg == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>] = tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>] - (float)amount;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  tline[0] = ((float)move_time) / 1000; tSetpoints.push_back(tline);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <a class="code" href="namespaceTrajectory.html#a5eb9f58cd19e3f1eba441f85cd7fb109">interpTrajectory</a>(tSetpoints, tInterp, interp_dt_);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// This will lower whichever leg is higher to the ground</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">// Initial implementation just thinks about the knees.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// TODO: should consider hip angle too,</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// then adjust knee angle only to get foot to floor</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">// This function will never change the sign of the knee angle</span></div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classCmdServer.html#a81d431a0714d28b938a90cca443f8261">  279</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a81d431a0714d28b938a90cca443f8261">CmdServer::lowerLeg</a>(<span class="keywordtype">int</span> move_time) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tSetpoints, tInterp; deque&lt;float&gt; tline(robot_-&gt;jangles_);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  tline.push_front(0); tSetpoints.push_back(tline);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">if</span> (abs(robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>]) &gt; abs(robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>])) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Right knee is higher than left knee</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>] &lt; 0) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>] = 0 - abs(robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>]);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>] = abs(robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>]);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  } <span class="keywordflow">else</span> {  <span class="comment">// Left knee is higher than right knee</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span> (robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>] &lt; 0) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>] = 0 - abs(robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>]);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      tline[1 + <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>] = abs(robot_-&gt;jangles_[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>]);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  tline[0] = ((float)move_time) / 1000; tSetpoints.push_back(tline);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="namespaceTrajectory.html#a5eb9f58cd19e3f1eba441f85cd7fb109">interpTrajectory</a>(tSetpoints, tInterp, interp_dt_);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="classCmdServer.html#a35b4baa2be4363ca00ad1cbbeed89aab">  302</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a35b4baa2be4363ca00ad1cbbeed89aab">CmdServer::dance</a>(<span class="keywordtype">int</span> robot_id) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">if</span> (robot_id &lt; 0) { robot_id = 0; } <span class="keywordflow">if</span> (robot_id &gt; 2) { robot_id = 2; }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="namespaceTrajectory.html#a1c71275a235d108a1a98cb24296c6a91">hipToBeSquare</a>(robot_, robot_id);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="classCmdServer.html#a78271dfaa7989f4cb2522fb1ca3dad49">  307</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a78271dfaa7989f4cb2522fb1ca3dad49">CmdServer::arms</a>(<span class="keywordtype">int</span> r_angle, <span class="keywordtype">int</span> l_angle) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  std::map&lt;int, float&gt; angles = {{<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781ace998dff000f371281e7f8fcfec8ee0c">RARM</a>, (float)r_angle}, {<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781afbe7b4a6d6c1b2c80f16e769ab19d044">LARM</a>, (float)l_angle}};</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  robot_-&gt;setServos(angles);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="classCmdServer.html#a7dabdd6fd4d9d0801fab57f9070dc25c">  312</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a7dabdd6fd4d9d0801fab57f9070dc25c">CmdServer::demo</a>() {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordtype">float</span> alpha = 0;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordtype">int</span> delay = (int)(<a class="code" href="trajectory_8hpp.html#af8a7ea7ffc0387cecbb212e1b9301a44">INTERP_DT</a> * 1000.0);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  std::map&lt;int, float&gt; angles;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781ab24edcb61693657713c2e9299b34c539">NUMJOINTS</a>; ++i) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    angles[i] = robot_-&gt;jangles_[i];</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  this-&gt;eyes(<a class="code" href="definitions_8hpp.html#af3a3ef46c4fb0f15114f3b98b327afb6">EYES_NORMAL</a>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  sleep(1);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  this-&gt;eyes(<a class="code" href="definitions_8hpp.html#a180dd67e07311154f118089e7074dfca">EYES_ANGRY</a>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  sleep(1);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  this-&gt;eyes(<a class="code" href="definitions_8hpp.html#aa2f3ff28d9cd5bac0ad7e17c5ecddc92">EYES_EXCITED</a>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  sleep(1);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  this-&gt;eyes(<a class="code" href="definitions_8hpp.html#a20d0eda6d6bec8f6896262f08f8d734c">EYES_WIDE</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  sleep(1);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// Test eyes</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">for</span> (alpha = 0; alpha &lt; 6.28; alpha += 0.1) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    robot_-&gt;setServo(<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c">EYES</a>, <a class="code" href="definitions_8hpp.html#a180dd67e07311154f118089e7074dfca">EYES_ANGRY</a> * sin(alpha));</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(delay);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  this-&gt;swingArms(100, 100, 2000, 8);  <span class="comment">// Arms Swing Together</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  this-&gt;swingArms(100, -100, 2000, 8); <span class="comment">// Arms Swing Opposed</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  marty_msgs::ServoMsgArray h_array;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  marty_msgs::ServoMsg r_hip; r_hip.servo_id = <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d">RHIP</a>; r_hip.servo_cmd = 45;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  marty_msgs::ServoMsg l_hip; l_hip.servo_id = <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781acba4bbf9fa32f57381b07b97d65b75fc">LHIP</a>; l_hip.servo_cmd = 45;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  h_array.servo_msg.push_back(r_hip); h_array.servo_msg.push_back(l_hip);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  this-&gt;swingJoints(h_array, 2000, 8);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">// Forward and Backward</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">for</span> (alpha = 0; alpha &lt; 12.56; alpha += 0.1) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d">RHIP</a>] = 45 * sin(alpha); angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781acba4bbf9fa32f57381b07b97d65b75fc">LHIP</a>] = angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d">RHIP</a>];</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    robot_-&gt;setServos(angles);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(delay);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// Side to Side</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">for</span> (alpha = 0; alpha &lt; 12.56; alpha += 0.1) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>] = 45 * sin(alpha); angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>] = angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>];</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    robot_-&gt;setServos(angles);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(delay);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// Feet Twist in same direction</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d">RHIP</a>] = 0; angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a>] = 0; angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781acba4bbf9fa32f57381b07b97d65b75fc">LHIP</a>] = 0;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a>] = 0;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">for</span> (alpha = 0; alpha &lt; 12.56; alpha += 0.1) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a7be1c3ac848204cfea8eed224719c087">RTWIST</a>] = 45 * sin(alpha); angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa2541846b559e05eb47db9bcff331799">LTWIST</a>] = angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a7be1c3ac848204cfea8eed224719c087">RTWIST</a>];</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    robot_-&gt;setServos(angles);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(delay);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// Feet Twist in opposite direction</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">for</span> (alpha = 0; alpha &lt; 12.56; alpha += 0.1) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a7be1c3ac848204cfea8eed224719c087">RTWIST</a>] = 20 * sin(alpha); angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa2541846b559e05eb47db9bcff331799">LTWIST</a>] = 0 - angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a7be1c3ac848204cfea8eed224719c087">RTWIST</a>];</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    robot_-&gt;setServos(angles);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(delay);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  this-&gt;testLeg(<a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>, 4.0);  <span class="comment">// Test Left Leg</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  this-&gt;testLeg(<a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>, 4.0); <span class="comment">// Test Right Leg</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> genTraj;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// Walk about</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> numstep = 0; numstep &lt; 1; numstep++) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    genTraj = <a class="code" href="namespaceTrajectory.html#a2af9d0deb83d514dd3c2d607723aa061">genStepLeft</a>(robot_, 0, 25, 1.25);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    genTraj.clear();</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    genTraj = <a class="code" href="namespaceTrajectory.html#a804d3ff8ef7f61f33b86065f9100a04d">genStepRight</a>(robot_, 0, 25, 1.25);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    genTraj.clear();</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> numstep = 0; numstep &lt; 2; numstep++) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    genTraj = <a class="code" href="namespaceTrajectory.html#a2af9d0deb83d514dd3c2d607723aa061">genStepLeft</a>(robot_, 80, 0, 1.5);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    genTraj.clear();</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    genTraj = <a class="code" href="namespaceTrajectory.html#a804d3ff8ef7f61f33b86065f9100a04d">genStepRight</a>(robot_, 80, 0, 1.5);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    genTraj.clear();</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// Test a Left Kick</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  genTraj = <a class="code" href="namespaceTrajectory.html#a26f3cf7c809da1f0ab4d5bdcc48c0b53">genKickLeft</a>(robot_, 2.0);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  genTraj.clear();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// Celebrate!</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  genTraj = <a class="code" href="namespaceTrajectory.html#a24c4d5807270e72661f7f98d7f81198a">genCelebration</a>(robot_, 4.0);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  genTraj.clear();</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  robot_-&gt;celebSound(1.4);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="classCmdServer.html#a44631c57cca844f6a874c4d33ffe94c8">  411</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a44631c57cca844f6a874c4d33ffe94c8">CmdServer::testLeg</a>(<span class="keywordtype">int</span> side, <span class="keywordtype">int</span> duration) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> genTraj;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    genTraj = <a class="code" href="namespaceTrajectory.html#aa90538f4e4771c9fd64618dbb7ba4198">genRaisedFootTwistLeft</a>(robot_, ((<span class="keywordtype">float</span>)duration) / 1000);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    genTraj = <a class="code" href="namespaceTrajectory.html#a6bbd43f4dbde315477255d1b5409e5de">genRaisedFootTwistRight</a>(robot_, ((<span class="keywordtype">float</span>)duration) / 1000);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="classCmdServer.html#a5823135bcd67403dddde8398a66aec36">  422</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a5823135bcd67403dddde8398a66aec36">CmdServer::sitBack</a>(<span class="keywordtype">int</span> duration) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> genTraj = <a class="code" href="namespaceTrajectory.html#af2c7dc134f3279545161df613918af08">genSitBack</a>(robot_, ((<span class="keywordtype">float</span>)duration) / 1000);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, genTraj);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="classCmdServer.html#aeaad60827d13a9ed1838f7f68843636b">  427</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#aeaad60827d13a9ed1838f7f68843636b">CmdServer::swingArms</a>(<span class="keywordtype">int</span> r_arm, <span class="keywordtype">int</span> l_arm, <span class="keywordtype">int</span> duration, <span class="keywordtype">int</span> cycles) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">if</span> (duration &lt;= 0) { duration = 2000; }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordflow">if</span> (cycles &lt;= 0) { cycles = 4; }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordtype">int</span> delay = (int)(<a class="code" href="trajectory_8hpp.html#af8a7ea7ffc0387cecbb212e1b9301a44">INTERP_DT</a> * 1000.0);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordtype">int</span> steps = duration / delay;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  std::map&lt;int, float&gt; angles;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781ab24edcb61693657713c2e9299b34c539">NUMJOINTS</a>; ++i) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    angles[i] = robot_-&gt;jangles_[i];</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordtype">float</span> alpha = 0;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordtype">float</span> inc = (1.57 * cycles) / steps;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; steps; ++s) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781ace998dff000f371281e7f8fcfec8ee0c">RARM</a>] = r_arm * sin(alpha);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    angles[<a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781afbe7b4a6d6c1b2c80f16e769ab19d044">LARM</a>] = l_arm * sin(alpha);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    robot_-&gt;setServos(angles);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(delay);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    alpha += inc;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="classCmdServer.html#ae7e90df760720819674a3a471fd2664f">  448</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#ae7e90df760720819674a3a471fd2664f">CmdServer::swingJoints</a>(marty_msgs::ServoMsgArray servo_array, <span class="keywordtype">int</span> duration,</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                            <span class="keywordtype">int</span> cycles) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">if</span> (duration &lt;= 0) { duration = 2000; }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">if</span> (cycles &lt;= 0) { cycles = 4; }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordtype">int</span> delay = (int)(<a class="code" href="trajectory_8hpp.html#af8a7ea7ffc0387cecbb212e1b9301a44">INTERP_DT</a> * 1000.0);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordtype">int</span> steps = duration / delay;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  std::map&lt;int, float&gt; angles;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781ab24edcb61693657713c2e9299b34c539">NUMJOINTS</a>; ++i) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    angles[i] = robot_-&gt;jangles_[i];</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordtype">float</span> alpha = 0;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordtype">float</span> inc = (1.57 * cycles) / steps;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; steps; ++s) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; servo_array.servo_msg.size(); ++i) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      angles[servo_array.servo_msg[i].servo_id] =</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        servo_array.servo_msg[i].servo_cmd * sin(alpha);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    robot_-&gt;setServos(angles);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(delay);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    alpha += inc;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classCmdServer.html#acb8b56dbfc5d2fdd531a57fe854a16e7">  472</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#acb8b56dbfc5d2fdd531a57fe854a16e7">CmdServer::sideStep</a>(<span class="keywordtype">int</span> side, <span class="keywordtype">int</span> num_steps, <span class="keywordtype">int</span> move_time,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                         <span class="keywordtype">int</span> step_length) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">if</span> ((side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) || (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a>)) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordtype">int</span> opp_side = 1 - side;  <span class="comment">//  Switch left/right</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (side == <a class="code" href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a>) {step_length = -step_length;} <span class="comment">// Invert step direction</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> step = 0; step &lt; num_steps; ++step) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      this-&gt;moveJoint(side, <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab9e0f44c16490f36ac1e4e253b069b12">J_KNEE</a>, -step_length, (move_time / 4));</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      this-&gt;moveJoint(opp_side, <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab9e0f44c16490f36ac1e4e253b069b12">J_KNEE</a>, step_length, (move_time / 4));</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      this-&gt;moveJoint(side, <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab9e0f44c16490f36ac1e4e253b069b12">J_KNEE</a>, 0, (move_time / 4));</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      this-&gt;moveJoint(opp_side, <a class="code" href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab9e0f44c16490f36ac1e4e253b069b12">J_KNEE</a>, 0, (move_time / 4));</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  } <span class="keywordflow">else</span> { ROS_ERROR(<span class="stringliteral">&quot;Can only sidestep left or right&quot;</span>); }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="classCmdServer.html#aeeb29c8ebb7179d71a2b645f55baf71a">  486</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#aeeb29c8ebb7179d71a2b645f55baf71a">CmdServer::standStraight</a>(<span class="keywordtype">int</span> move_time) {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <a class="code" href="structdata__t.html">data_t</a> tSetpoints, tInterp; deque&lt;float&gt; tline(robot_-&gt;jangles_);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  tline.push_front(0); tSetpoints.push_back(tline);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordtype">float</span> straight_time = ((float)move_time) / 1000;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="namespaceTrajectory.html#a6272a1000c05efa545b4084bb3950754">setPointsLegsZero</a>(tSetpoints, straight_time);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="namespaceTrajectory.html#a5eb9f58cd19e3f1eba441f85cd7fb109">interpTrajectory</a>(tSetpoints, tInterp, interp_dt_);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">runTrajectory</a>(robot_, tInterp);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">// void CmdServer::playSound(int frequency, int duration, int freq2) {</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">//   robot_-&gt;playSound(frequency, (float)duration / 1000, freq2);</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">// }</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="classCmdServer.html#ab00b3a0ba42347d3e6233bba13937f86">  499</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#ab00b3a0ba42347d3e6233bba13937f86">CmdServer::playSounds</a>(std::vector&lt;int&gt; sounds) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  marty_msgs::SoundArray sound_msg;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">if</span> (((sounds.size() - 1) % 3) != 0) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    ROS_WARN(<span class="stringliteral">&quot;Received wrong number of sound arguments!&quot;</span>);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; ((sounds.size() - 1) / 3); ++s) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      marty_msgs::Sound sound;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordtype">int</span> i = 1 + (s * 3);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      sound.freq1 = sounds[i];</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      sound.duration = ((float)sounds[i + 1] / 1000);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      sound.freq2 = sounds[i + 2];</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      sound_msg.sound.push_back(sound);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    robot_-&gt;playSoundArray(sound_msg);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;}</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="classCmdServer.html#a0a39f8afc19b89efa74aff8a1ac206fc">  516</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a0a39f8afc19b89efa74aff8a1ac206fc">CmdServer::stopRobot</a>() {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <a class="code" href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a>(<a class="code" href="cmd__server_8hpp.html#aa71ae51141fa8e98fffd2cc28cc01de5">stop_wait</a>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  robot_-&gt;stopRobot();</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">// SERVER FUNCTIONS, DO NOT TOUCH!</span></div><div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="cmd__server_8cpp.html#ab2d6a033af38252d92b01ebea493821c">  522</a></span>&#160;<span class="keyword">volatile</span> sig_atomic_t <a class="code" href="cmd__server_8cpp.html#ab2d6a033af38252d92b01ebea493821c">exiting</a> = 0;</div><div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="cmd__server_8cpp.html#a9cfe21a610edf60adef2c1e5dc2881d2">  523</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="cmd__server_8cpp.html#a9cfe21a610edf60adef2c1e5dc2881d2">exit_f</a>(<span class="keywordtype">int</span> sig) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  ROS_WARN(<span class="stringliteral">&quot;EXITING!&quot;</span>);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  ros::param::del(<span class="stringliteral">&quot;/marty&quot;</span>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  ros::shutdown();</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <a class="code" href="cmd__server_8cpp.html#ab2d6a033af38252d92b01ebea493821c">exiting</a> = 1;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="classCmdServer.html#a3f072997fa9b78e8ae58e17f9a076153">  530</a></span>&#160;<a class="code" href="classCmdServer.html#a3f072997fa9b78e8ae58e17f9a076153">CmdServer::CmdServer</a>(ros::NodeHandle&amp; nh) : nh_(nh) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  this-&gt;<a class="code" href="classCmdServer.html#aebac88e8c8280979011bfe7598a1ff37">loadParams</a>();</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  this-&gt;<a class="code" href="classCmdServer.html#a7047bbb33f3a21691abf3f409a105afc">init</a>();</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  this-&gt;<a class="code" href="classCmdServer.html#abbf9d37605a296c5a111a81e4bd10539">rosSetup</a>();</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  ROS_INFO(<span class="stringliteral">&quot;CmdServer Ready!&quot;</span>);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="classCmdServer.html#a660687ee97bb47c7dd36f673d2e285f2">  537</a></span>&#160;<a class="code" href="classCmdServer.html#a660687ee97bb47c7dd36f673d2e285f2">CmdServer::~CmdServer</a>() {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  ros::param::del(<span class="stringliteral">&quot;/marty&quot;</span>);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="classCmdServer.html#aebac88e8c8280979011bfe7598a1ff37">  541</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#aebac88e8c8280979011bfe7598a1ff37">CmdServer::loadParams</a>() {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordtype">bool</span> launched;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>.param(<span class="stringliteral">&quot;launched&quot;</span>, launched, <span class="keyword">false</span>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">if</span> (!launched) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    ROS_ERROR(<span class="stringliteral">&quot;Please use &#39;roslaunch ros_marty marty.launch&#39;\n&quot;</span>);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    ros::shutdown();</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>.param(<span class="stringliteral">&quot;ready_move&quot;</span>, <a class="code" href="classCmdServer.html#a4fdfdf490f5756309ebca246c2a6b5b7">ready_move_</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="classCmdServer.html#a7047bbb33f3a21691abf3f409a105afc">  551</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a7047bbb33f3a21691abf3f409a105afc">CmdServer::init</a>() {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a> = <span class="keyword">new</span> <a class="code" href="classMartyCore.html">MartyCore</a>(<a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <a class="code" href="classCmdServer.html#a3bdd2f9bf753219a76199d8663b1cf85">busy_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="classCmdServer.html#a2c5642452cf27d14545030266365777c">ros_cmd_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="classCmdServer.html#a11bce2435f84c565da624e7c987634d0">resp_request_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="classCmdServer.html#a90cdd24c4b9d1eb2049e51053ed045c6">interp_dt_</a> = 0.02;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classCmdServer.html#a2825c22453633717ee474997e475c71e">turn_spot_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;}</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="classCmdServer.html#abbf9d37605a296c5a111a81e4bd10539">  560</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#abbf9d37605a296c5a111a81e4bd10539">CmdServer::rosSetup</a>() {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="classCmdServer.html#a05d205baf54df90c7ef603f8c951e3c1">gpio_sub_</a> = <a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>.subscribe(<span class="stringliteral">&quot;gpios&quot;</span>, 1000, &amp;<a class="code" href="classCmdServer.html#a8e644b00b14364b9b700101d2fdb8ab7">CmdServer::gpioCB</a>, <span class="keyword">this</span>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="classCmdServer.html#a04e6f23ccd0821465c4aa41ed7f1e013">accel_sub_</a> = <a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>.subscribe(<span class="stringliteral">&quot;accel&quot;</span>, 1000, &amp;<a class="code" href="classCmdServer.html#a68d4be85ceeb883ddea593b079344191">CmdServer::accelCB</a>, <span class="keyword">this</span>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <a class="code" href="classCmdServer.html#ac4ed0092ad6e13b33989e288b5c07773">batt_sub_</a> = <a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>.subscribe(<span class="stringliteral">&quot;battery&quot;</span>, 1000, &amp;<a class="code" href="classCmdServer.html#ade1d3a06f61dc54f4b3ac96c50aed012">CmdServer::battCB</a>, <span class="keyword">this</span>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="classCmdServer.html#aaaabf43fa602d9ea37fc0c78e276851b">curr_sub_</a> = <a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>.subscribe(<span class="stringliteral">&quot;motor_currents&quot;</span>, 1000, &amp;<a class="code" href="classCmdServer.html#a786fdcfbd0c73e081c214afd3d781c3f">CmdServer::currCB</a>, <span class="keyword">this</span>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classCmdServer.html#a8e9c4dec186391f8d7d70d028e184648">ball_sub_</a> = <a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>.subscribe(<span class="stringliteral">&quot;ball_pos&quot;</span>, 1000, &amp;<a class="code" href="classCmdServer.html#ab0aa7ab6158878da7a9c685f4174a64e">CmdServer::ballCB</a>, <span class="keyword">this</span>);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <a class="code" href="classCmdServer.html#a0ee20637fc1e4c7a61d21250e9153679">cmd_srv_</a> = <a class="code" href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">nh_</a>.advertiseService(<span class="stringliteral">&quot;command&quot;</span>, &amp;<a class="code" href="classCmdServer.html#a230889d892b1bfab1f26f77632cad300">CmdServer::cmd_service</a>, <span class="keyword">this</span>);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="classCmdServer.html#a230889d892b1bfab1f26f77632cad300">  569</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classCmdServer.html#a230889d892b1bfab1f26f77632cad300">CmdServer::cmd_service</a>(marty_msgs::Command::Request&amp; req,</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                            marty_msgs::Command::Response&amp; res) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classCmdServer.html#a3bdd2f9bf753219a76199d8663b1cf85">busy_</a>) { <a class="code" href="classCmdServer.html#a2c5642452cf27d14545030266365777c">ros_cmd_</a> = <span class="keyword">true</span>; <a class="code" href="classCmdServer.html#af5dc0413ecdd5b887581717716b0ce11">cmd_data_</a> = req.data; res.success = <span class="keyword">true</span>; }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordflow">else</span> { res.success = <span class="keyword">false</span>; }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="classCmdServer.html#ad2f1bb45a4aae7ed3a2612ec6816058a">  576</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#ad2f1bb45a4aae7ed3a2612ec6816058a">CmdServer::setupServer</a>() {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// Create socket, initialise and listen</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keyword">struct </span>sockaddr_in servaddr;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="classCmdServer.html#ad957729bdd92ef7625649c90880844c3">sock_</a> = socket(AF_INET, SOCK_STREAM, 0);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">if</span> (sock_ &lt; 0) { ROS_ERROR(<span class="stringliteral">&quot;cannot create socket&quot;</span>); ros::shutdown(); }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordtype">int</span> yes = 1;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  setsockopt(sock_, SOL_SOCKET, SO_REUSEADDR, &amp;yes, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  memset((<span class="keywordtype">char</span>*)&amp;servaddr, 0, <span class="keyword">sizeof</span>(servaddr));</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  servaddr.sin_family = AF_INET;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  servaddr.sin_addr.s_addr = INADDR_ANY;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  servaddr.sin_port = htons(<a class="code" href="cmd__server_8hpp.html#a614217d263be1fb1a5f76e2ff7be19a2">PORT</a>);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordflow">if</span> (bind(sock_, (<span class="keyword">struct</span> sockaddr*) &amp;servaddr, <span class="keyword">sizeof</span>(servaddr)) &lt; 0)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  { ROS_ERROR(<span class="stringliteral">&quot;ERROR on binding&quot;</span>); ros::shutdown(); }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  listen(sock_, 5);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// set server socket to non-binding, so that accept will not hang</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  fcntl(sock_, F_SETFL, O_NONBLOCK);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  printf(<span class="stringliteral">&quot;Socket initialised on port: %d. Waiting for incoming connection\n&quot;</span>,</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <a class="code" href="cmd__server_8hpp.html#a614217d263be1fb1a5f76e2ff7be19a2">PORT</a>);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="classCmdServer.html#a21159fa6f00222e5cb2a4ef1e4fd7bce">  598</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a21159fa6f00222e5cb2a4ef1e4fd7bce">CmdServer::stopServer</a>() {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  close(<a class="code" href="classCmdServer.html#ad957729bdd92ef7625649c90880844c3">sock_</a>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="classCmdServer.html#a6d8a7298275857d5471b2414ac73716f">  602</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classCmdServer.html#a6d8a7298275857d5471b2414ac73716f">CmdServer::waitForCmd</a>() {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keyword">struct </span>sockaddr_in clientaddr;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordtype">char</span> buffer[4096];</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordtype">char</span> <span class="keyword">const</span>* resp_msg = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  socklen_t clilen = <span class="keyword">sizeof</span>(clientaddr);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordtype">int</span> clisock = accept(<a class="code" href="classCmdServer.html#ad957729bdd92ef7625649c90880844c3">sock_</a>, (<span class="keyword">struct</span> sockaddr*) &amp;clientaddr, &amp;clilen);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">if</span> (clisock &gt;= 0) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#a4066fc0ce1f417392f88f08fe9c19d27">enableRobot</a>();</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    ROS_DEBUG(<span class="stringliteral">&quot;Incoming connection accepted...\n&quot;</span>);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordtype">int</span> nbytes = read(clisock, buffer, 4096);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">if</span> (nbytes &gt; 0) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      ROS_DEBUG(<span class="stringliteral">&quot;Data received: %d&quot;</span>, buffer[0]);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      vector&lt;int8_t&gt; dbytes;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      dbytes.push_back(buffer[0]);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; nbytes; i++) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        ROS_DEBUG(<span class="stringliteral">&quot;\t%d&quot;</span>, buffer[i]);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        dbytes.push_back(buffer[i]);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      ROS_DEBUG(<span class="stringliteral">&quot;Running Command\n&quot;</span>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordtype">bool</span> <span class="keyword">get</span> = <span class="keyword">false</span>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">if</span> (dbytes[0] == <a class="code" href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a45c21ca83f2e20fbfd255d9c23552b48">CMD_GET</a>) { <span class="keyword">get</span> = <span class="keyword">true</span>; }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#a744733f3a5da3ed7ccd8e75a8919d1ee">hasFallen</a>() &amp;&amp; <a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#ab10ea227f2e4ac7e79a6b07f1eb17b7a">fallDisabled</a>() &amp;&amp; !<span class="keyword">get</span>) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        ROS_WARN(<span class="stringliteral">&quot;Marty has fallen over! Please pick him up and try again.&quot;</span>);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        resp_msg = <span class="stringliteral">&quot;Fallen&quot;</span>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="classCmdServer.html#a43e0afa3503d74be0f2ed15f9bff8a77">runSockCommand</a>(dbytes);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        resp_msg = <span class="stringliteral">&quot;Success&quot;</span>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      ROS_DEBUG(<span class="stringliteral">&quot;Done!\n&quot;</span>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classCmdServer.html#a11bce2435f84c565da624e7c987634d0">resp_request_</a>) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      write(clisock, (<span class="keywordtype">char</span>*)&amp;<a class="code" href="classCmdServer.html#a6eecd0db7d2c572458cd76e80470201b">val_request_</a>, <span class="keyword">sizeof</span>(<a class="code" href="classCmdServer.html#a6eecd0db7d2c572458cd76e80470201b">val_request_</a>));</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <a class="code" href="classCmdServer.html#a11bce2435f84c565da624e7c987634d0">resp_request_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      write(clisock, resp_msg, strlen(resp_msg));</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    close(clisock);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classCmdServer.html#a2c5642452cf27d14545030266365777c">ros_cmd_</a>) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#a744733f3a5da3ed7ccd8e75a8919d1ee">hasFallen</a>() &amp;&amp; <a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#ab10ea227f2e4ac7e79a6b07f1eb17b7a">fallDisabled</a>()) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      ROS_WARN(<span class="stringliteral">&quot;Marty has fallen over! Please pick him up and try again.&quot;</span>);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#ad2ebd3e535dc9487a285b9242aedcd81">stopRobot</a>();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#a4066fc0ce1f417392f88f08fe9c19d27">enableRobot</a>();</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classCmdServer.html#a3bdd2f9bf753219a76199d8663b1cf85">busy_</a>) { <a class="code" href="classCmdServer.html#a4af24896fe3783fcd87d0d6eb5c59108">runCommand</a>(<a class="code" href="classCmdServer.html#af5dc0413ecdd5b887581717716b0ce11">cmd_data_</a>); }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordflow">else</span> { <a class="code" href="classCmdServer.html#a37ddb6dbdd536665c37bb8a69cc29209">cmd_queue_</a>.push_back(<a class="code" href="classCmdServer.html#af5dc0413ecdd5b887581717716b0ce11">cmd_data_</a>); }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="classCmdServer.html#a2c5642452cf27d14545030266365777c">ros_cmd_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!<a class="code" href="classCmdServer.html#a3bdd2f9bf753219a76199d8663b1cf85">busy_</a>) &amp;&amp; (<a class="code" href="classCmdServer.html#a37ddb6dbdd536665c37bb8a69cc29209">cmd_queue_</a>.size() &gt; 0)) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#a744733f3a5da3ed7ccd8e75a8919d1ee">hasFallen</a>() &amp;&amp; <a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#ab10ea227f2e4ac7e79a6b07f1eb17b7a">fallDisabled</a>()) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      ROS_WARN(<span class="stringliteral">&quot;Marty has fallen over! Please pick him up and try again.&quot;</span>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <a class="code" href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">robot_</a>-&gt;<a class="code" href="classMartyCore.html#ad2ebd3e535dc9487a285b9242aedcd81">stopRobot</a>();</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      ROS_INFO_STREAM(<span class="stringliteral">&quot;RUNNING NEXT CMD: &quot;</span> &lt;&lt; <a class="code" href="classCmdServer.html#a37ddb6dbdd536665c37bb8a69cc29209">cmd_queue_</a>[0][0]);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <a class="code" href="classCmdServer.html#a4af24896fe3783fcd87d0d6eb5c59108">runCommand</a>(<a class="code" href="classCmdServer.html#a37ddb6dbdd536665c37bb8a69cc29209">cmd_queue_</a>[0]);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="classCmdServer.html#a37ddb6dbdd536665c37bb8a69cc29209">cmd_queue_</a>.erase(<a class="code" href="classCmdServer.html#a37ddb6dbdd536665c37bb8a69cc29209">cmd_queue_</a>.begin());</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="cmd__server_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">  661</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="cmd__server_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  signal(SIGINT, <a class="code" href="cmd__server_8cpp.html#a9cfe21a610edf60adef2c1e5dc2881d2">exit_f</a>);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  ros::init(argc, argv, <span class="stringliteral">&quot;cmd_server&quot;</span>);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  ros::NodeHandle nh;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <a class="code" href="classCmdServer.html">CmdServer</a> cmd_server(nh);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  cmd_server.<a class="code" href="classCmdServer.html#a8584c0e24e48a82764ec741019903057">robotReady</a>();</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  cmd_server.<a class="code" href="classCmdServer.html#ad2f1bb45a4aae7ed3a2612ec6816058a">setupServer</a>();</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  ros::Rate r(50);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">while</span> (ros::ok() &amp;&amp; !<a class="code" href="cmd__server_8cpp.html#ab2d6a033af38252d92b01ebea493821c">exiting</a>) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    cmd_server.<a class="code" href="classCmdServer.html#a6d8a7298275857d5471b2414ac73716f">waitForCmd</a>();</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    ros::spinOnce();</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    r.sleep();</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  cmd_server.<a class="code" href="classCmdServer.html#a21159fa6f00222e5cb2a4ef1e4fd7bce">stopServer</a>();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  ros::shutdown();</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;}</div><div class="ttc" id="cmd__server_8hpp_html_aa98b6524756441f584e32369e01c056ea2d36f7902fbea303a85f6710ea654baa"><div class="ttname"><a href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056ea2d36f7902fbea303a85f6710ea654baa">GET_CURR</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00087">cmd_server.hpp:87</a></div></div>
<div class="ttc" id="classCmdServer_html_acb8b56dbfc5d2fdd531a57fe854a16e7"><div class="ttname"><a href="classCmdServer.html#acb8b56dbfc5d2fdd531a57fe854a16e7">CmdServer::sideStep</a></div><div class="ttdeci">void sideStep(int side, int num_steps=1, int move_time=1000, int step_length=50)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00472">cmd_server.cpp:472</a></div></div>
<div class="ttc" id="classCmdServer_html_a78271dfaa7989f4cb2522fb1ca3dad49"><div class="ttname"><a href="classCmdServer.html#a78271dfaa7989f4cb2522fb1ca3dad49">CmdServer::arms</a></div><div class="ttdeci">void arms(int r_angle=0, int l_angle=0)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00307">cmd_server.cpp:307</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a180dd67e07311154f118089e7074dfca"><div class="ttname"><a href="definitions_8hpp.html#a180dd67e07311154f118089e7074dfca">EYES_ANGRY</a></div><div class="ttdeci">#define EYES_ANGRY</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00108">definitions.hpp:108</a></div></div>
<div class="ttc" id="classCmdServer_html_a5823135bcd67403dddde8398a66aec36"><div class="ttname"><a href="classCmdServer.html#a5823135bcd67403dddde8398a66aec36">CmdServer::sitBack</a></div><div class="ttdeci">void sitBack(int duration)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00422">cmd_server.cpp:422</a></div></div>
<div class="ttc" id="classCmdServer_html_a3bdd2f9bf753219a76199d8663b1cf85"><div class="ttname"><a href="classCmdServer.html#a3bdd2f9bf753219a76199d8663b1cf85">CmdServer::busy_</a></div><div class="ttdeci">bool busy_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00139">cmd_server.hpp:139</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781aa2541846b559e05eb47db9bcff331799"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa2541846b559e05eb47db9bcff331799">LTWIST</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00031">definitions.hpp:31</a></div></div>
<div class="ttc" id="classCmdServer_html_a0a39f8afc19b89efa74aff8a1ac206fc"><div class="ttname"><a href="classCmdServer.html#a0a39f8afc19b89efa74aff8a1ac206fc">CmdServer::stopRobot</a></div><div class="ttdeci">void stopRobot()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00516">cmd_server.cpp:516</a></div></div>
<div class="ttc" id="classCmdServer_html_a7dabdd6fd4d9d0801fab57f9070dc25c"><div class="ttname"><a href="classCmdServer.html#a7dabdd6fd4d9d0801fab57f9070dc25c">CmdServer::demo</a></div><div class="ttdeci">void demo()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00312">cmd_server.cpp:312</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ae3996976d8ffb3e58d88f58227473f8eaf5f04d45b5f8b0deedcd661717ee8a81"><div class="ttname"><a href="cmd__server_8hpp.html#ae3996976d8ffb3e58d88f58227473f8eaf5f04d45b5f8b0deedcd661717ee8a81">AXES_Z</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00050">cmd_server.hpp:50</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a25387b64a1d9106bf336b7b1d9c748f6"><div class="ttname"><a href="namespaceTrajectory.html#a25387b64a1d9106bf336b7b1d9c748f6">Trajectory::setPointsLeanBackward</a></div><div class="ttdeci">bool setPointsLeanBackward(data_t &amp;tSetpoints, int leanAmount, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00515">trajectory.cpp:515</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430af4f1445f1abfe4c16c922a3b4d2c8c47"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430af4f1445f1abfe4c16c922a3b4d2c8c47">CMD_LIFTLEG</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00069">cmd_server.hpp:69</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781ace998dff000f371281e7f8fcfec8ee0c"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781ace998dff000f371281e7f8fcfec8ee0c">RARM</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00037">definitions.hpp:37</a></div></div>
<div class="ttc" id="classCmdServer_html_aaaabf43fa602d9ea37fc0c78e276851b"><div class="ttname"><a href="classCmdServer.html#aaaabf43fa602d9ea37fc0c78e276851b">CmdServer::curr_sub_</a></div><div class="ttdeci">ros::Subscriber curr_sub_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00164">cmd_server.hpp:164</a></div></div>
<div class="ttc" id="classCmdServer_html_add29fa62713239f562f01900b166d5b3"><div class="ttname"><a href="classCmdServer.html#add29fa62713239f562f01900b166d5b3">CmdServer::moveJoint</a></div><div class="ttdeci">void moveJoint(int side, int joint, int amount, int move_time=2000)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00194">cmd_server.cpp:194</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a2af9d0deb83d514dd3c2d607723aa061"><div class="ttname"><a href="namespaceTrajectory.html#a2af9d0deb83d514dd3c2d607723aa061">Trajectory::genStepLeft</a></div><div class="ttdeci">data_t genStepLeft(MartyCore *robot, int stepLength, int turn, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00083">trajectory.cpp:83</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ac59007d612b1e2624efd27182f4362f5a6e510256800dc3a70b66811ae4521d8f"><div class="ttname"><a href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5a6e510256800dc3a70b66811ae4521d8f">J_LEG</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00057">cmd_server.hpp:57</a></div></div>
<div class="ttc" id="namespaceserial__read_html_a1b3233bdb91ba2e59025a5300099421a"><div class="ttname"><a href="namespaceserial__read.html#a1b3233bdb91ba2e59025a5300099421a">serial_read.data</a></div><div class="ttdeci">data</div><div class="ttdef"><b>Definition:</b> <a href="serial__read_8py_source.html#l00102">serial_read.py:102</a></div></div>
<div class="ttc" id="classCmdServer_html_a1338a738bf970f9e69159bb7e542411b"><div class="ttname"><a href="classCmdServer.html#a1338a738bf970f9e69159bb7e542411b">CmdServer::liftLeg</a></div><div class="ttdeci">void liftLeg(int leg, int amount=100, int move_time=2000)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00261">cmd_server.cpp:261</a></div></div>
<div class="ttc" id="classCmdServer_html"><div class="ttname"><a href="classCmdServer.html">CmdServer</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00091">cmd_server.hpp:91</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430afcc25eefc3aff15e600009c99b86edf2"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430afcc25eefc3aff15e600009c99b86edf2">CMD_MOVEJOINT</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00064">cmd_server.hpp:64</a></div></div>
<div class="ttc" id="classCmdServer_html_a2d5d0712985b65d78cc20aebba84e0b3"><div class="ttname"><a href="classCmdServer.html#a2d5d0712985b65d78cc20aebba84e0b3">CmdServer::walk</a></div><div class="ttdeci">void walk(int num_steps=2, int turn=0, int move_time=3000, int step_length=50, int side=-1)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00126">cmd_server.cpp:126</a></div></div>
<div class="ttc" id="classCmdServer_html_a35b4baa2be4363ca00ad1cbbeed89aab"><div class="ttname"><a href="classCmdServer.html#a35b4baa2be4363ca00ad1cbbeed89aab">CmdServer::dance</a></div><div class="ttdeci">void dance(int robot_id)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00302">cmd_server.cpp:302</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d365719f54ec46acec768c9d6cc459f">RKNEE</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00035">definitions.hpp:35</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a9657004f93152e2f6234ddd23e99962c"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a9657004f93152e2f6234ddd23e99962c">CMD_DANCE</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00072">cmd_server.hpp:72</a></div></div>
<div class="ttc" id="classCmdServer_html_af5dc0413ecdd5b887581717716b0ce11"><div class="ttname"><a href="classCmdServer.html#af5dc0413ecdd5b887581717716b0ce11">CmdServer::cmd_data_</a></div><div class="ttdeci">std::vector&lt; int &gt; cmd_data_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00151">cmd_server.hpp:151</a></div></div>
<div class="ttc" id="classCmdServer_html_a6d8a7298275857d5471b2414ac73716f"><div class="ttname"><a href="classCmdServer.html#a6d8a7298275857d5471b2414ac73716f">CmdServer::waitForCmd</a></div><div class="ttdeci">void waitForCmd()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00602">cmd_server.cpp:602</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ae3996976d8ffb3e58d88f58227473f8eac63f6f4dc47fea2818aa918cb9cd1221"><div class="ttname"><a href="cmd__server_8hpp.html#ae3996976d8ffb3e58d88f58227473f8eac63f6f4dc47fea2818aa918cb9cd1221">AXES_Y</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00049">cmd_server.hpp:49</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a33e8fcc35148a551044c95bd9719385b"><div class="ttname"><a href="namespaceTrajectory.html#a33e8fcc35148a551044c95bd9719385b">Trajectory::setPointsLeanForward</a></div><div class="ttdeci">bool setPointsLeanForward(data_t &amp;tSetpoints, int leanAmount, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00504">trajectory.cpp:504</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a224b9163917ac32fc95a60d8c1eec3aaa16c4e3cc46413792ed5f7620112c7ca2"><div class="ttname"><a href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa16c4e3cc46413792ed5f7620112c7ca2">CMD_FORW</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00043">cmd_server.hpp:43</a></div></div>
<div class="ttc" id="classCmdServer_html_aeaad60827d13a9ed1838f7f68843636b"><div class="ttname"><a href="classCmdServer.html#aeaad60827d13a9ed1838f7f68843636b">CmdServer::swingArms</a></div><div class="ttdeci">void swingArms(int r_arm, int l_arm, int duration=2000, int cycles=4)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00427">cmd_server.cpp:427</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430af5e1fd68b47167cc9651c686e1bfbb14"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430af5e1fd68b47167cc9651c686e1bfbb14">CMD_DEMO</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00075">cmd_server.hpp:75</a></div></div>
<div class="ttc" id="classCmdServer_html_a90cdd24c4b9d1eb2049e51053ed045c6"><div class="ttname"><a href="classCmdServer.html#a90cdd24c4b9d1eb2049e51053ed045c6">CmdServer::interp_dt_</a></div><div class="ttdeci">float interp_dt_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00150">cmd_server.hpp:150</a></div></div>
<div class="ttc" id="structdata__t_html"><div class="ttname"><a href="structdata__t.html">data_t</a></div><div class="ttdef"><b>Definition:</b> <a href="data__t_8hpp_source.html#l00015">data_t.hpp:15</a></div></div>
<div class="ttc" id="classCmdServer_html_a0ee20637fc1e4c7a61d21250e9153679"><div class="ttname"><a href="classCmdServer.html#a0ee20637fc1e4c7a61d21250e9153679">CmdServer::cmd_srv_</a></div><div class="ttdeci">ros::ServiceServer cmd_srv_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00166">cmd_server.hpp:166</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ac59007d612b1e2624efd27182f4362f5ab3c37ee369fed324a8f308cc669fcfe8"><div class="ttname"><a href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab3c37ee369fed324a8f308cc669fcfe8">J_HIP</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00054">cmd_server.hpp:54</a></div></div>
<div class="ttc" id="classCmdServer_html_aebac88e8c8280979011bfe7598a1ff37"><div class="ttname"><a href="classCmdServer.html#aebac88e8c8280979011bfe7598a1ff37">CmdServer::loadParams</a></div><div class="ttdeci">void loadParams()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00541">cmd_server.cpp:541</a></div></div>
<div class="ttc" id="cmd__server_8cpp_html_ab2d6a033af38252d92b01ebea493821c"><div class="ttname"><a href="cmd__server_8cpp.html#ab2d6a033af38252d92b01ebea493821c">exiting</a></div><div class="ttdeci">volatile sig_atomic_t exiting</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00522">cmd_server.cpp:522</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a9728cf856915274c74e7e19f234dfdd2"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a9728cf856915274c74e7e19f234dfdd2">CMD_LEAN</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00065">cmd_server.hpp:65</a></div></div>
<div class="ttc" id="classCmdServer_html_a4af24896fe3783fcd87d0d6eb5c59108"><div class="ttname"><a href="classCmdServer.html#a4af24896fe3783fcd87d0d6eb5c59108">CmdServer::runCommand</a></div><div class="ttdeci">void runCommand(vector&lt; int &gt; data)</div><div class="ttdoc">Runs commands received by the server. </div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00048">cmd_server.cpp:48</a></div></div>
<div class="ttc" id="classCmdServer_html_a68d4be85ceeb883ddea593b079344191"><div class="ttname"><a href="classCmdServer.html#a68d4be85ceeb883ddea593b079344191">CmdServer::accelCB</a></div><div class="ttdeci">void accelCB(const marty_msgs::Accelerometer &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00131">cmd_server.hpp:131</a></div></div>
<div class="ttc" id="definitions_8hpp_html_aa2f3ff28d9cd5bac0ad7e17c5ecddc92"><div class="ttname"><a href="definitions_8hpp.html#aa2f3ff28d9cd5bac0ad7e17c5ecddc92">EYES_EXCITED</a></div><div class="ttdeci">#define EYES_EXCITED</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00110">definitions.hpp:110</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781aa716227e5efdc2fcc36ae68cf942880d">RHIP</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00033">definitions.hpp:33</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a006e24f39842404105e8521db322f879"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a006e24f39842404105e8521db322f879">CMD_SIDESTEP</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00077">cmd_server.hpp:77</a></div></div>
<div class="ttc" id="classCmdServer_html_a2825c22453633717ee474997e475c71e"><div class="ttname"><a href="classCmdServer.html#a2825c22453633717ee474997e475c71e">CmdServer::turn_spot_</a></div><div class="ttdeci">bool turn_spot_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00142">cmd_server.hpp:142</a></div></div>
<div class="ttc" id="classCmdServer_html_ab0aa7ab6158878da7a9c685f4174a64e"><div class="ttname"><a href="classCmdServer.html#ab0aa7ab6158878da7a9c685f4174a64e">CmdServer::ballCB</a></div><div class="ttdeci">void ballCB(const geometry_msgs::Pose2D &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00134">cmd_server.hpp:134</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a28416064f29d5a0f12e5d5a2921f1e5f"><div class="ttname"><a href="namespaceTrajectory.html#a28416064f29d5a0f12e5d5a2921f1e5f">Trajectory::setPointsLeanLeft</a></div><div class="ttdeci">bool setPointsLeanLeft(data_t &amp;tSetpoints, int leanAmount, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00478">trajectory.cpp:478</a></div></div>
<div class="ttc" id="classCmdServer_html_a3f072997fa9b78e8ae58e17f9a076153"><div class="ttname"><a href="classCmdServer.html#a3f072997fa9b78e8ae58e17f9a076153">CmdServer::CmdServer</a></div><div class="ttdeci">CmdServer(ros::NodeHandle &amp;nh)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00530">cmd_server.cpp:530</a></div></div>
<div class="ttc" id="classCmdServer_html_a4fdfdf490f5756309ebca246c2a6b5b7"><div class="ttname"><a href="classCmdServer.html#a4fdfdf490f5756309ebca246c2a6b5b7">CmdServer::ready_move_</a></div><div class="ttdeci">bool ready_move_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00145">cmd_server.hpp:145</a></div></div>
<div class="ttc" id="classCmdServer_html_ac4ed0092ad6e13b33989e288b5c07773"><div class="ttname"><a href="classCmdServer.html#ac4ed0092ad6e13b33989e288b5c07773">CmdServer::batt_sub_</a></div><div class="ttdeci">ros::Subscriber batt_sub_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00163">cmd_server.hpp:163</a></div></div>
<div class="ttc" id="classMartyCore_html_a744733f3a5da3ed7ccd8e75a8919d1ee"><div class="ttname"><a href="classMartyCore.html#a744733f3a5da3ed7ccd8e75a8919d1ee">MartyCore::hasFallen</a></div><div class="ttdeci">bool hasFallen()</div><div class="ttdef"><b>Definition:</b> <a href="marty__core_8hpp_source.html#l00088">marty_core.hpp:88</a></div></div>
<div class="ttc" id="classCmdServer_html_aa625b40a8118dad2f1866dccce0cc1ed"><div class="ttname"><a href="classCmdServer.html#aa625b40a8118dad2f1866dccce0cc1ed">CmdServer::celebrate</a></div><div class="ttdeci">void celebrate(int move_time=4000)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00250">cmd_server.cpp:250</a></div></div>
<div class="ttc" id="classCmdServer_html_a660687ee97bb47c7dd36f673d2e285f2"><div class="ttname"><a href="classCmdServer.html#a660687ee97bb47c7dd36f673d2e285f2">CmdServer::~CmdServer</a></div><div class="ttdeci">~CmdServer()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00537">cmd_server.cpp:537</a></div></div>
<div class="ttc" id="classCmdServer_html_abbf9d37605a296c5a111a81e4bd10539"><div class="ttname"><a href="classCmdServer.html#abbf9d37605a296c5a111a81e4bd10539">CmdServer::rosSetup</a></div><div class="ttdeci">void rosSetup()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00560">cmd_server.cpp:560</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781ab24edcb61693657713c2e9299b34c539"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781ab24edcb61693657713c2e9299b34c539">NUMJOINTS</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00041">definitions.hpp:41</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781a7be1c3ac848204cfea8eed224719c087"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a7be1c3ac848204cfea8eed224719c087">RTWIST</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00034">definitions.hpp:34</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_aa98b6524756441f584e32369e01c056ea7da4cf12063f7070d5dbc792dd196aaf"><div class="ttname"><a href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056ea7da4cf12063f7070d5dbc792dd196aaf">GET_BALL</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00088">cmd_server.hpp:88</a></div></div>
<div class="ttc" id="classCmdServer_html_a05d205baf54df90c7ef603f8c951e3c1"><div class="ttname"><a href="classCmdServer.html#a05d205baf54df90c7ef603f8c951e3c1">CmdServer::gpio_sub_</a></div><div class="ttdeci">ros::Subscriber gpio_sub_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00161">cmd_server.hpp:161</a></div></div>
<div class="ttc" id="classCmdServer_html_a65bee1493bcc4c8eab09286bc0518f26"><div class="ttname"><a href="classCmdServer.html#a65bee1493bcc4c8eab09286bc0518f26">CmdServer::eyes</a></div><div class="ttdeci">void eyes(int amount=0, int amount2=0)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00167">cmd_server.cpp:167</a></div></div>
<div class="ttc" id="classCmdServer_html_a8e9c4dec186391f8d7d70d028e184648"><div class="ttname"><a href="classCmdServer.html#a8e9c4dec186391f8d7d70d028e184648">CmdServer::ball_sub_</a></div><div class="ttdeci">ros::Subscriber ball_sub_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00165">cmd_server.hpp:165</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430af57f1734be597111ddbe5ac6ca44e90c"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430af57f1734be597111ddbe5ac6ca44e90c">CMD_ROLLERSKATE</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00073">cmd_server.hpp:73</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a22f05414bba2eb7e98db17045c41f975"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a22f05414bba2eb7e98db17045c41f975">CMD_ARMS</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00074">cmd_server.hpp:74</a></div></div>
<div class="ttc" id="classCmdServer_html_afb3906a06f7007e7d79ad4b6e05ee068"><div class="ttname"><a href="classCmdServer.html#afb3906a06f7007e7d79ad4b6e05ee068">CmdServer::robot_</a></div><div class="ttdeci">MartyCore * robot_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00148">cmd_server.hpp:148</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a7aea1697d03ef1e6ff1bba5e34f42e15"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a7aea1697d03ef1e6ff1bba5e34f42e15">CMD_EYES</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00067">cmd_server.hpp:67</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781afbe7b4a6d6c1b2c80f16e769ab19d044"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781afbe7b4a6d6c1b2c80f16e769ab19d044">LARM</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00036">definitions.hpp:36</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ac59007d612b1e2624efd27182f4362f5a7db6059125d5810c8dd0cfa27480ce2d"><div class="ttname"><a href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5a7db6059125d5810c8dd0cfa27480ce2d">J_EYES</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00059">cmd_server.hpp:59</a></div></div>
<div class="ttc" id="classCmdServer_html_a0a711b068efc5ed27ec4cc040bf9a523"><div class="ttname"><a href="classCmdServer.html#a0a711b068efc5ed27ec4cc040bf9a523">CmdServer::hello</a></div><div class="ttdeci">void hello()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00113">cmd_server.cpp:113</a></div></div>
<div class="ttc" id="classCmdServer_html_a7047bbb33f3a21691abf3f409a105afc"><div class="ttname"><a href="classCmdServer.html#a7047bbb33f3a21691abf3f409a105afc">CmdServer::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00551">cmd_server.cpp:551</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a804d3ff8ef7f61f33b86065f9100a04d"><div class="ttname"><a href="namespaceTrajectory.html#a804d3ff8ef7f61f33b86065f9100a04d">Trajectory::genStepRight</a></div><div class="ttdeci">data_t genStepRight(MartyCore *robot, int stepLength, int turn, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00141">trajectory.cpp:141</a></div></div>
<div class="ttc" id="classMartyCore_html_ad2ebd3e535dc9487a285b9242aedcd81"><div class="ttname"><a href="classMartyCore.html#ad2ebd3e535dc9487a285b9242aedcd81">MartyCore::stopRobot</a></div><div class="ttdeci">void stopRobot()</div><div class="ttdef"><b>Definition:</b> <a href="marty__core_8cpp_source.html#l00589">marty_core.cpp:589</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a901c26d5f141b4ae538e251e73c42cd8"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a901c26d5f141b4ae538e251e73c42cd8">CMD_CELEBRATE</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00071">cmd_server.hpp:71</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a26f3cf7c809da1f0ab4d5bdcc48c0b53"><div class="ttname"><a href="namespaceTrajectory.html#a26f3cf7c809da1f0ab4d5bdcc48c0b53">Trajectory::genKickLeft</a></div><div class="ttdeci">data_t genKickLeft(MartyCore *robot, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00318">trajectory.cpp:318</a></div></div>
<div class="ttc" id="classCmdServer_html_a44631c57cca844f6a874c4d33ffe94c8"><div class="ttname"><a href="classCmdServer.html#a44631c57cca844f6a874c4d33ffe94c8">CmdServer::testLeg</a></div><div class="ttdeci">void testLeg(int side, int duration)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00411">cmd_server.cpp:411</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88"><div class="ttname"><a href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa6209b9b123c01914b557bb921f334f88">CMD_LEFT</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00041">cmd_server.hpp:41</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html"><div class="ttname"><a href="cmd__server_8hpp.html">cmd_server.hpp</a></div><div class="ttdoc">CMD Server for Marty, enabling execution of CMDs remotely. </div></div>
<div class="ttc" id="cmd__server_8hpp_html_aa71ae51141fa8e98fffd2cc28cc01de5"><div class="ttname"><a href="cmd__server_8hpp.html#aa71ae51141fa8e98fffd2cc28cc01de5">stop_wait</a></div><div class="ttdeci">#define stop_wait</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00035">cmd_server.hpp:35</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a0e997cfa95d4e5ca6c670d9290848770"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a0e997cfa95d4e5ca6c670d9290848770">CMD_STRAIGHT</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00078">cmd_server.hpp:78</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_abfb7183db3ae7e963ad16c84c3572531"><div class="ttname"><a href="namespaceTrajectory.html#abfb7183db3ae7e963ad16c84c3572531">Trajectory::runTrajectory</a></div><div class="ttdeci">bool runTrajectory(MartyCore *robot, data_t &amp;traj)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00063">trajectory.cpp:63</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a6272a1000c05efa545b4084bb3950754"><div class="ttname"><a href="namespaceTrajectory.html#a6272a1000c05efa545b4084bb3950754">Trajectory::setPointsLegsZero</a></div><div class="ttdeci">bool setPointsLegsZero(data_t &amp;tSetpoints, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00526">trajectory.cpp:526</a></div></div>
<div class="ttc" id="cmd__server_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="cmd__server_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00661">cmd_server.cpp:661</a></div></div>
<div class="ttc" id="classMartyCore_html_a4066fc0ce1f417392f88f08fe9c19d27"><div class="ttname"><a href="classMartyCore.html#a4066fc0ce1f417392f88f08fe9c19d27">MartyCore::enableRobot</a></div><div class="ttdeci">void enableRobot()</div><div class="ttdef"><b>Definition:</b> <a href="marty__core_8cpp_source.html#l00584">marty_core.cpp:584</a></div></div>
<div class="ttc" id="classCmdServer_html_a43e0afa3503d74be0f2ed15f9bff8a77"><div class="ttname"><a href="classCmdServer.html#a43e0afa3503d74be0f2ed15f9bff8a77">CmdServer::runSockCommand</a></div><div class="ttdeci">void runSockCommand(vector&lt; int8_t &gt; data)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00098">cmd_server.cpp:98</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a8d1bd7d57fd40150260cf8920fe2783c">EYES</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00038">definitions.hpp:38</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ac59007d612b1e2624efd27182f4362f5ad689a8d4c58d5198cdf29bd1966deb4e"><div class="ttname"><a href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ad689a8d4c58d5198cdf29bd1966deb4e">J_TWIST</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00055">cmd_server.hpp:55</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_af2c7dc134f3279545161df613918af08"><div class="ttname"><a href="namespaceTrajectory.html#af2c7dc134f3279545161df613918af08">Trajectory::genSitBack</a></div><div class="ttdeci">data_t genSitBack(MartyCore *robot, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00125">trajectory.cpp:125</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_aa98b6524756441f584e32369e01c056eaccfbe6ea481f72c83a5e43626cfa6163"><div class="ttname"><a href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056eaccfbe6ea481f72c83a5e43626cfa6163">GET_GPIO</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00084">cmd_server.hpp:84</a></div></div>
<div class="ttc" id="classCmdServer_html_a230889d892b1bfab1f26f77632cad300"><div class="ttname"><a href="classCmdServer.html#a230889d892b1bfab1f26f77632cad300">CmdServer::cmd_service</a></div><div class="ttdeci">bool cmd_service(marty_msgs::Command::Request &amp;req, marty_msgs::Command::Response &amp;res)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00569">cmd_server.cpp:569</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a24c4d5807270e72661f7f98d7f81198a"><div class="ttname"><a href="namespaceTrajectory.html#a24c4d5807270e72661f7f98d7f81198a">Trajectory::genCelebration</a></div><div class="ttdeci">data_t genCelebration(MartyCore *robot, float move_time)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00184">trajectory.cpp:184</a></div></div>
<div class="ttc" id="classCmdServer_html_a2c5642452cf27d14545030266365777c"><div class="ttname"><a href="classCmdServer.html#a2c5642452cf27d14545030266365777c">CmdServer::ros_cmd_</a></div><div class="ttdeci">bool ros_cmd_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00140">cmd_server.hpp:140</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a3a7b2585d8f81aa095ef413b539cfb18"><div class="ttname"><a href="definitions_8hpp.html#a3a7b2585d8f81aa095ef413b539cfb18">sleepms</a></div><div class="ttdeci">void sleepms(int ms)</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00027">definitions.hpp:27</a></div></div>
<div class="ttc" id="classMartyCore_html_ab10ea227f2e4ac7e79a6b07f1eb17b7a"><div class="ttname"><a href="classMartyCore.html#ab10ea227f2e4ac7e79a6b07f1eb17b7a">MartyCore::fallDisabled</a></div><div class="ttdeci">bool fallDisabled()</div><div class="ttdef"><b>Definition:</b> <a href="marty__core_8hpp_source.html#l00089">marty_core.hpp:89</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a5eb9f58cd19e3f1eba441f85cd7fb109"><div class="ttname"><a href="namespaceTrajectory.html#a5eb9f58cd19e3f1eba441f85cd7fb109">Trajectory::interpTrajectory</a></div><div class="ttdeci">bool interpTrajectory(data_t tIn, data_t &amp;tOut, float dt)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00016">trajectory.cpp:16</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ac59007d612b1e2624efd27182f4362f5ab9e0f44c16490f36ac1e4e253b069b12"><div class="ttname"><a href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab9e0f44c16490f36ac1e4e253b069b12">J_KNEE</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00056">cmd_server.hpp:56</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58"><div class="ttname"><a href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9f69104487ae00ae3f63308c4cd7ce58">CMD_RIGHT</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00042">cmd_server.hpp:42</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430af52f5636bdd52b5e2d392539bf1729f0"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430af52f5636bdd52b5e2d392539bf1729f0">CMD_WALK</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00066">cmd_server.hpp:66</a></div></div>
<div class="ttc" id="classCmdServer_html_ad2f1bb45a4aae7ed3a2612ec6816058a"><div class="ttname"><a href="classCmdServer.html#ad2f1bb45a4aae7ed3a2612ec6816058a">CmdServer::setupServer</a></div><div class="ttdeci">void setupServer()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00576">cmd_server.cpp:576</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430ac707e16d43a0995c8712f0b68e19e8ce"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430ac707e16d43a0995c8712f0b68e19e8ce">CMD_SOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00079">cmd_server.hpp:79</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_aa98b6524756441f584e32369e01c056ea1ce16a47fac91dad0eafbfd8810a2751"><div class="ttname"><a href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056ea1ce16a47fac91dad0eafbfd8810a2751">GET_ACCEL</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00085">cmd_server.hpp:85</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a45c21ca83f2e20fbfd255d9c23552b48"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a45c21ca83f2e20fbfd255d9c23552b48">CMD_GET</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00076">cmd_server.hpp:76</a></div></div>
<div class="ttc" id="classCmdServer_html_a21159fa6f00222e5cb2a4ef1e4fd7bce"><div class="ttname"><a href="classCmdServer.html#a21159fa6f00222e5cb2a4ef1e4fd7bce">CmdServer::stopServer</a></div><div class="ttdeci">void stopServer()</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00598">cmd_server.cpp:598</a></div></div>
<div class="ttc" id="classCmdServer_html_a6d451ea1dfec2c3282d5070df20b766e"><div class="ttname"><a href="classCmdServer.html#a6d451ea1dfec2c3282d5070df20b766e">CmdServer::getData</a></div><div class="ttdeci">void getData(int sensor, int id)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00171">cmd_server.cpp:171</a></div></div>
<div class="ttc" id="classCmdServer_html_ad957729bdd92ef7625649c90880844c3"><div class="ttname"><a href="classCmdServer.html#ad957729bdd92ef7625649c90880844c3">CmdServer::sock_</a></div><div class="ttdeci">int sock_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00149">cmd_server.hpp:149</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781a6fc590f449f3eee91a79e902aabf8ed3">LKNEE</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00032">definitions.hpp:32</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a264bfc86816c6820737f110de3a825d6"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a264bfc86816c6820737f110de3a825d6">CMD_HELLO</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00063">cmd_server.hpp:63</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a01e442ba6c4ce0800d92173656c3f3e3"><div class="ttname"><a href="namespaceTrajectory.html#a01e442ba6c4ce0800d92173656c3f3e3">Trajectory::setPointsLeanRight</a></div><div class="ttdeci">bool setPointsLeanRight(data_t &amp;tSetpoints, int leanAmount, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00491">trajectory.cpp:491</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a224b9163917ac32fc95a60d8c1eec3aaa9a658d9d56ad4ea529b0278a089606be"><div class="ttname"><a href="cmd__server_8hpp.html#a224b9163917ac32fc95a60d8c1eec3aaa9a658d9d56ad4ea529b0278a089606be">CMD_BACK</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00044">cmd_server.hpp:44</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_aa98b6524756441f584e32369e01c056eadfe82e03b6ed8daf918149d250e1c2e2"><div class="ttname"><a href="cmd__server_8hpp.html#aa98b6524756441f584e32369e01c056eadfe82e03b6ed8daf918149d250e1c2e2">GET_BATT</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00086">cmd_server.hpp:86</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a1c71275a235d108a1a98cb24296c6a91"><div class="ttname"><a href="namespaceTrajectory.html#a1c71275a235d108a1a98cb24296c6a91">Trajectory::hipToBeSquare</a></div><div class="ttdeci">int hipToBeSquare(MartyCore *robot, int robotID)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00927">trajectory.cpp:927</a></div></div>
<div class="ttc" id="classCmdServer_html_a37ddb6dbdd536665c37bb8a69cc29209"><div class="ttname"><a href="classCmdServer.html#a37ddb6dbdd536665c37bb8a69cc29209">CmdServer::cmd_queue_</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; cmd_queue_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00152">cmd_server.hpp:152</a></div></div>
<div class="ttc" id="classCmdServer_html_ab33ed8c07ffc129fbce8539920e7e1be"><div class="ttname"><a href="classCmdServer.html#ab33ed8c07ffc129fbce8539920e7e1be">CmdServer::kick</a></div><div class="ttdeci">void kick(int side=CMD_LEFT, int move_time=3000)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00154">cmd_server.cpp:154</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a422c80a0d4397fa7ec4d9289073a908f"><div class="ttname"><a href="namespaceTrajectory.html#a422c80a0d4397fa7ec4d9289073a908f">Trajectory::genKickRight</a></div><div class="ttdeci">data_t genKickRight(MartyCore *robot, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00359">trajectory.cpp:359</a></div></div>
<div class="ttc" id="classCmdServer_html_ae7e90df760720819674a3a471fd2664f"><div class="ttname"><a href="classCmdServer.html#ae7e90df760720819674a3a471fd2664f">CmdServer::swingJoints</a></div><div class="ttdeci">void swingJoints(marty_msgs::ServoMsgArray, int duration=2000, int cycles=4)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00448">cmd_server.cpp:448</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a12efeffaf3dde25faeeb92600cca9f59"><div class="ttname"><a href="namespaceTrajectory.html#a12efeffaf3dde25faeeb92600cca9f59">Trajectory::rollerSkate</a></div><div class="ttdeci">int rollerSkate(MartyCore *robot)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l01186">trajectory.cpp:1186</a></div></div>
<div class="ttc" id="classCmdServer_html_af740c732f9adfcaffb0f96b23e1650cd"><div class="ttname"><a href="classCmdServer.html#af740c732f9adfcaffb0f96b23e1650cd">CmdServer::nh_</a></div><div class="ttdeci">ros::NodeHandle nh_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00093">cmd_server.hpp:93</a></div></div>
<div class="ttc" id="classCmdServer_html_a786fdcfbd0c73e081c214afd3d781c3f"><div class="ttname"><a href="classCmdServer.html#a786fdcfbd0c73e081c214afd3d781c3f">CmdServer::currCB</a></div><div class="ttdeci">void currCB(const marty_msgs::MotorCurrents &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00133">cmd_server.hpp:133</a></div></div>
<div class="ttc" id="definitions_8hpp_html_af3a3ef46c4fb0f15114f3b98b327afb6"><div class="ttname"><a href="definitions_8hpp.html#af3a3ef46c4fb0f15114f3b98b327afb6">EYES_NORMAL</a></div><div class="ttdeci">#define EYES_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00109">definitions.hpp:109</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a6bbd43f4dbde315477255d1b5409e5de"><div class="ttname"><a href="namespaceTrajectory.html#a6bbd43f4dbde315477255d1b5409e5de">Trajectory::genRaisedFootTwistRight</a></div><div class="ttdeci">data_t genRaisedFootTwistRight(MartyCore *robot, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00271">trajectory.cpp:271</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430aaeb85c9f900a5e9ed191734a810a0084"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430aaeb85c9f900a5e9ed191734a810a0084">CMD_KICK</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00068">cmd_server.hpp:68</a></div></div>
<div class="ttc" id="cmd__server_8cpp_html_a9cfe21a610edf60adef2c1e5dc2881d2"><div class="ttname"><a href="cmd__server_8cpp.html#a9cfe21a610edf60adef2c1e5dc2881d2">exit_f</a></div><div class="ttdeci">void exit_f(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00523">cmd_server.cpp:523</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ae3996976d8ffb3e58d88f58227473f8ea4ebc2421ebfbea2e5368ed1a27fbc0c1"><div class="ttname"><a href="cmd__server_8hpp.html#ae3996976d8ffb3e58d88f58227473f8ea4ebc2421ebfbea2e5368ed1a27fbc0c1">AXES_X</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00048">cmd_server.hpp:48</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_aa90538f4e4771c9fd64618dbb7ba4198"><div class="ttname"><a href="namespaceTrajectory.html#aa90538f4e4771c9fd64618dbb7ba4198">Trajectory::genRaisedFootTwistLeft</a></div><div class="ttdeci">data_t genRaisedFootTwistLeft(MartyCore *robot, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00224">trajectory.cpp:224</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_ac59007d612b1e2624efd27182f4362f5ab7371c4178bbec38f3171849f02e4ef1"><div class="ttname"><a href="cmd__server_8hpp.html#ac59007d612b1e2624efd27182f4362f5ab7371c4178bbec38f3171849f02e4ef1">J_ARM</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00058">cmd_server.hpp:58</a></div></div>
<div class="ttc" id="classMartyCore_html"><div class="ttname"><a href="classMartyCore.html">MartyCore</a></div><div class="ttdef"><b>Definition:</b> <a href="marty__core_8hpp_source.html#l00057">marty_core.hpp:57</a></div></div>
<div class="ttc" id="classCmdServer_html_ab00b3a0ba42347d3e6233bba13937f86"><div class="ttname"><a href="classCmdServer.html#ab00b3a0ba42347d3e6233bba13937f86">CmdServer::playSounds</a></div><div class="ttdeci">void playSounds(std::vector&lt; int &gt; sounds)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00499">cmd_server.cpp:499</a></div></div>
<div class="ttc" id="classCmdServer_html_a11bce2435f84c565da624e7c987634d0"><div class="ttname"><a href="classCmdServer.html#a11bce2435f84c565da624e7c987634d0">CmdServer::resp_request_</a></div><div class="ttdeci">bool resp_request_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00141">cmd_server.hpp:141</a></div></div>
<div class="ttc" id="classCmdServer_html_aeeb29c8ebb7179d71a2b645f55baf71a"><div class="ttname"><a href="classCmdServer.html#aeeb29c8ebb7179d71a2b645f55baf71a">CmdServer::standStraight</a></div><div class="ttdeci">void standStraight(int move_time=1000)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00486">cmd_server.cpp:486</a></div></div>
<div class="ttc" id="classCmdServer_html_ade1d3a06f61dc54f4b3ac96c50aed012"><div class="ttname"><a href="classCmdServer.html#ade1d3a06f61dc54f4b3ac96c50aed012">CmdServer::battCB</a></div><div class="ttdeci">void battCB(const std_msgs::Float32 &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00132">cmd_server.hpp:132</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a0a9c281eff44a3c24d869735fedb0781acba4bbf9fa32f57381b07b97d65b75fc"><div class="ttname"><a href="definitions_8hpp.html#a0a9c281eff44a3c24d869735fedb0781acba4bbf9fa32f57381b07b97d65b75fc">LHIP</a></div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00030">definitions.hpp:30</a></div></div>
<div class="ttc" id="classCmdServer_html_a6eecd0db7d2c572458cd76e80470201b"><div class="ttname"><a href="classCmdServer.html#a6eecd0db7d2c572458cd76e80470201b">CmdServer::val_request_</a></div><div class="ttdeci">float val_request_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00153">cmd_server.hpp:153</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a9a7187f6ef5a5dfe9149619bffdacd4a"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a9a7187f6ef5a5dfe9149619bffdacd4a">CMD_LOWERLEG</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00070">cmd_server.hpp:70</a></div></div>
<div class="ttc" id="classCmdServer_html_a8e644b00b14364b9b700101d2fdb8ab7"><div class="ttname"><a href="classCmdServer.html#a8e644b00b14364b9b700101d2fdb8ab7">CmdServer::gpioCB</a></div><div class="ttdeci">void gpioCB(const marty_msgs::GPIOs &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00130">cmd_server.hpp:130</a></div></div>
<div class="ttc" id="classCmdServer_html_aef68e045dd515d5f722e341b900eb329"><div class="ttname"><a href="classCmdServer.html#aef68e045dd515d5f722e341b900eb329">CmdServer::lean</a></div><div class="ttdeci">void lean(int dir, int amount=100, int move_time=2000)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00238">cmd_server.cpp:238</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a1939e90743463fb34c8c571ec0590430a1e0ceff2d6f13742786f42dac58149bc"><div class="ttname"><a href="cmd__server_8hpp.html#a1939e90743463fb34c8c571ec0590430a1e0ceff2d6f13742786f42dac58149bc">CMD_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00080">cmd_server.hpp:80</a></div></div>
<div class="ttc" id="namespaceTrajectory_html"><div class="ttname"><a href="namespaceTrajectory.html">Trajectory</a></div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8hpp_source.html#l00020">trajectory.hpp:20</a></div></div>
<div class="ttc" id="trajectory_8hpp_html_af8a7ea7ffc0387cecbb212e1b9301a44"><div class="ttname"><a href="trajectory_8hpp.html#af8a7ea7ffc0387cecbb212e1b9301a44">INTERP_DT</a></div><div class="ttdeci">#define INTERP_DT</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8hpp_source.html#l00018">trajectory.hpp:18</a></div></div>
<div class="ttc" id="classCmdServer_html_a8584c0e24e48a82764ec741019903057"><div class="ttname"><a href="classCmdServer.html#a8584c0e24e48a82764ec741019903057">CmdServer::robotReady</a></div><div class="ttdeci">void robotReady()</div><div class="ttdoc">Robot motion executed when cmdServer is ready. </div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00016">cmd_server.cpp:16</a></div></div>
<div class="ttc" id="classCmdServer_html_a04e6f23ccd0821465c4aa41ed7f1e013"><div class="ttname"><a href="classCmdServer.html#a04e6f23ccd0821465c4aa41ed7f1e013">CmdServer::accel_sub_</a></div><div class="ttdeci">ros::Subscriber accel_sub_</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00162">cmd_server.hpp:162</a></div></div>
<div class="ttc" id="classCmdServer_html_a81d431a0714d28b938a90cca443f8261"><div class="ttname"><a href="classCmdServer.html#a81d431a0714d28b938a90cca443f8261">CmdServer::lowerLeg</a></div><div class="ttdeci">void lowerLeg(int move_time=1000)</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8cpp_source.html#l00279">cmd_server.cpp:279</a></div></div>
<div class="ttc" id="definitions_8hpp_html_a20d0eda6d6bec8f6896262f08f8d734c"><div class="ttname"><a href="definitions_8hpp.html#a20d0eda6d6bec8f6896262f08f8d734c">EYES_WIDE</a></div><div class="ttdeci">#define EYES_WIDE</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8hpp_source.html#l00111">definitions.hpp:111</a></div></div>
<div class="ttc" id="cmd__server_8hpp_html_a614217d263be1fb1a5f76e2ff7be19a2"><div class="ttname"><a href="cmd__server_8hpp.html#a614217d263be1fb1a5f76e2ff7be19a2">PORT</a></div><div class="ttdeci">#define PORT</div><div class="ttdef"><b>Definition:</b> <a href="cmd__server_8hpp_source.html#l00032">cmd_server.hpp:32</a></div></div>
<div class="ttc" id="namespaceTrajectory_html_a107677a3c2be922f577491da3ddd6951"><div class="ttname"><a href="namespaceTrajectory.html#a107677a3c2be922f577491da3ddd6951">Trajectory::genReturnToZero</a></div><div class="ttdeci">data_t genReturnToZero(MartyCore *robot, float period)</div><div class="ttdef"><b>Definition:</b> <a href="trajectory_8cpp_source.html#l00463">trajectory.cpp:463</a></div></div>
</div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/ros_marty">ros_marty</a><br />
Author(s): Alejandro Bordallo <alex.bordallo@robotical.io></br />
<small>autogenerated on Fri Jul 21 2017 14:51:45</small>
</div>
</body>
</html>
